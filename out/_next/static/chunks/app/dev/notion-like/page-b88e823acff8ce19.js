(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{4481:()=>{},15929:(e,t,n)=>{"use strict";n.d(t,{NotionEditorDev:()=>nl});var l=n(95155),i=n(12115),a=n(75109),s=n(83490),r=n(81891),o=n(17148),c=n(66377),u=n(54548),d=n(50099),p=n(4652),h=n(27192),x=n(24927),j=n(84109),m=n(87058),g=n(70504),f=n(16938),b=n(54643),v=n(3454),y=n(49020),C=n(55892);n(89054),n(68922),n(15736),n(49998),n(6604),n(9162),n(32078);var k=n(34078),w=n(85750),A=n(84945),N=n(52571),S=n(9518),E=n(75783),I=n(68447),L=n(9552);let R=e=>{let{editor:t,floatingOptions:n,selector:a="tiptap-suggestion-menu",children:s,maxHeight:r=384,pluginKey:o=L.X3,...c}=e,{editor:u}=(0,I.l)(t),[d,p]=i.useState(!1),[h,x]=i.useState(null),[j,m]=i.useState(null),[g,f]=i.useState([]),[b,v]=i.useState(""),[,y]=i.useState(null),{ref:C,style:k,getFloatingProps:w,isMounted:R}=(0,S.K)(d,h,1e3,{placement:"bottom-start",middleware:[(0,A.cY)(10),(0,A.UU)({mainAxis:!0,crossAxis:!1}),(0,A.BN)(),(0,A.Ej)({apply(e){let{availableHeight:t,elements:n}=e;if(n.floating){let e=r?Math.min(r,t):t;n.floating.style.setProperty("--suggestion-menu-max-height","".concat(e,"px"))}}})],onOpenChange(e){e||p(!1)},...n}),M=i.useRef(c);i.useEffect(()=>{M.current=c},[c]);let F=i.useCallback(()=>{p(!1)},[]);i.useEffect(()=>{if(!u||u.isDestroyed)return;u.state.plugins.find(e=>e.spec.key===o)&&u.unregisterPlugin(o);let e=(0,L.V0)({pluginKey:o instanceof N.hs?o:new N.hs(o),editor:u,command(e){var t,n;let{editor:l,range:i,props:a}=e;if(!i)return;let{view:s,state:r}=l,{selection:o}=r;if(!l.extensionManager.extensions.some(e=>{var t,n;return"mention"===e.name&&(null==(n=e.options)||null==(t=n.suggestion)?void 0:t.char)===M.current.char})){let e=o.$from.pos,t=null==(n=o.$head)?void 0:n.nodeBefore,l=t?function(e,t,n){if(!(null==t?void 0:t.text)||!n)return e;let l=t.text,i=l.lastIndexOf(n);return -1===i?e:e-l.substring(i).length}(e,t,M.current.char):o.$from.start(),i=r.tr.deleteRange(l,e);s.dispatch(i)}let c=s.state.selection.$to.nodeAfter,u=null==c||null==(t=c.text)?void 0:t.startsWith(" "),d={...i};u&&(d.to+=1),a.onSelect({editor:l,range:d,context:a.context})},render:()=>({onStart:e=>{var t,n;m(()=>e.command),f(e.items),v(e.query),y(e.range),x(null!=(n=null==(t=e.clientRect)?void 0:t.call(e))?n:null),p(!0)},onUpdate:e=>{var t,n;m(()=>e.command),f(e.items),v(e.query),y(e.range),x(null!=(n=null==(t=e.clientRect)?void 0:t.call(e))?n:null)},onKeyDown:e=>"Escape"===e.event.key&&(F(),!0),onExit:()=>{m(null),f([]),v(""),y(null),x(null),p(!1)}}),...M.current});return u.registerPlugin(e),()=>{u.isDestroyed||u.unregisterPlugin(o)}},[u,o,F]);let $=i.useCallback(e=>{F(),j&&j(e)},[F,j]),{selectedIndex:O}=(0,E.X)({editor:u,query:b,items:g,onSelect:$});return R&&d&&u?(0,l.jsx)("div",{ref:C,style:k,...w(),"data-selector":a,className:"tiptap-suggestion-menu",role:"listbox","aria-label":"Suggestions",children:s({items:g,selectedIndex:O,onSelect:$})}):null};var M=n(97884),F=n(60548),$=n(79153),O=n(64108);n(41270);let T=e=>{let{config:t,...n}=e,{getSlashMenuItems:a}=(0,M.J)(t),[s,r]=i.useState(!1);return i.useEffect(()=>{let e=()=>r(document.body.classList.contains("code-dark"));e();let t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]),(0,l.jsx)(R,{char:"/",pluginKey:"slashDropdownMenu",decorationClass:"tiptap-slash-decoration",decorationContent:"Filter...",selector:"tiptap-slash-dropdown-menu",items:e=>{let{query:t,editor:n}=e;return function(e,t){let n=t.trim().toLowerCase();return n?e.filter(e=>{var t,l;return!!(e.title.toLowerCase().includes(n)||(null==(t=e.subtext)?void 0:t.toLowerCase().includes(n))||(null==(l=e.keywords)?void 0:l.some(e=>e.toLowerCase().includes(n))))}).sort((e,t)=>{let l=e.title.toLowerCase(),i=t.title.toLowerCase();return l===n&&i!==n?-1:i===n&&l!==n?1:l.startsWith(n)&&!i.startsWith(n)?-1:i.startsWith(n)&&!l.startsWith(n)?1:0}):e}([{title:"Ask AI (DEV)",subtext:"AI 메뉴 열기",group:"AI",onSelect:()=>{try{window.dispatchEvent(new Event("open-dev-ai-menu"))}catch(e){}}},...a(n)],t)},...n,children:e=>(0,l.jsx)(W,{...e,config:t,isDark:s})})},V=e=>{let{item:t,isSelected:n,onSelect:a,isDark:s}=e,r=i.useRef(null),[o,c]=i.useState(!1);i.useEffect(()=>{let e=document.querySelector('[data-selector="tiptap-slash-dropdown-menu"]');if(!r.current||!n||!e)return;let t=(0,w.aI)(r.current,e);"top"===t?r.current.scrollIntoView(!0):"bottom"===t&&r.current.scrollIntoView(!1)},[n]);let u=t.badge,d=s?o?"#000000":"#ffffff":void 0;return(0,l.jsxs)(F.$n,{ref:r,"data-style":"ghost","data-active-state":n?"on":"off",onClick:a,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{color:d},children:[u&&(0,l.jsx)(u,{className:"tiptap-button-icon",style:{color:d,fill:d}}),(0,l.jsx)("div",{className:"tiptap-button-text",style:{color:d},children:t.title})]})},W=e=>{let{items:t,selectedIndex:n,onSelect:a,config:s,isDark:r}=e,o=i.useMemo(()=>{let e=[];if((null==s?void 0:s.showGroups)===!1)return t.forEach((t,i)=>{e.push((0,l.jsx)(V,{item:t,isSelected:i===n,onSelect:()=>a(t),isDark:r},"item-".concat(i,"-").concat(t.title)))}),e;let i={};return t.forEach((e,t)=>{let n=e.group||"";i[n]||(i[n]={items:[],indices:[]}),i[n].items.push(e),i[n].indices.push(t)}),Object.entries(i).forEach((t,i)=>{let[s,o]=t;i>0&&e.push((0,l.jsx)($.w,{orientation:"horizontal"},"separator-".concat(i)));let c=o.items.map((e,t)=>{let i=o.indices[t];return(0,l.jsx)(V,{item:e,isSelected:i===n,onSelect:()=>a(e),isDark:r},"item-".concat(i,"-").concat(e.title))});s?e.push((0,l.jsxs)(O.Vt,{children:[(0,l.jsx)(O.kF,{style:{color:r?"#8b949e":void 0},children:s}),(0,l.jsx)(F.e2,{children:c})]},"group-".concat(i,"-").concat(s))):e.push(...c)}),e},[t,n,a,null==s?void 0:s.showGroups,r]);return o.length?(0,l.jsx)(O.Zp,{className:"tiptap-slash-card",style:{maxHeight:"var(--suggestion-menu-max-height)",backgroundColor:r?"#1e1e1e":void 0,borderColor:r?"#30363d":void 0,color:r?"#c9d1d9":void 0},children:(0,l.jsx)(O.bw,{className:"tiptap-slash-card-body",style:{color:r?"#c9d1d9":void 0},children:o})}):null};var G=n(590),H=n(70842),z=n(9460),D=n(8562),Q=n(51560),U=n(20887),B=n(45479),_=n(1944),P=n(57390),Y=n(74927),K=n(94785),q=n(78487),X=n(55984),Z=n(79432),J=n(34161),ee=n(78156);n(20766),n(86921),Y.z,Y.z,q.s,H.W,z.k,D.S,U.k,B.d,P.k,_.h,G.I,X.e,Z.y,K.Q,J.V,J.V,J.V,J.V,Q.x;var et=n(98234),en=n(84228),el=n(82268),ei=n(98418);let ea=[{label:"English",value:"en"},{label:"Korean",value:"ko"},{label:"Chinese",value:"zh"},{label:"Japanese",value:"ja"},{label:"Spanish",value:"es"},{label:"Russian",value:"ru"},{label:"French",value:"fr"},{label:"Portuguese",value:"pt"},{label:"German",value:"de"},{label:"Italian",value:"it"},{label:"Dutch",value:"nl"},{label:"Indonesian",value:"id"},{label:"Vietnamese",value:"vi"},{label:"Turkish",value:"tr"},{label:"Arabic",value:"ar"}],es=[{label:"Academic",value:"academic"},{label:"Business",value:"business"},{label:"Casual",value:"casual"},{label:"Childfriendly",value:"childfriendly"},{label:"Confident",value:"confident"},{label:"Conversational",value:"conversational"},{label:"Creative",value:"creative"},{label:"Emotional",value:"emotional"},{label:"Excited",value:"excited"},{label:"Formal",value:"formal"},{label:"Friendly",value:"friendly"},{label:"Funny",value:"funny"},{label:"Numorous",value:"humorous"},{label:"Informative",value:"informative"},{label:"Inspirational",value:"inspirational"},{label:"Memeify",value:"memeify"},{label:"Narrative",value:"narrative"},{label:"Objective",value:"objective"},{label:"Persuasive",value:"persuasive"},{label:"Poetic",value:"poetic"}];var er=n(51033),eo=n(3328),ec=n(56723),eu=n(84782),ed=n(92511),ep=n(63071),eh=n(39421),ex=n(61218),ej=n(96797),em=n(58058);function eg(){return{adjustTone:{type:"nested",component:ev,filterItems:!0,icon:(0,l.jsx)(ed.N,{className:"tiptap-button-icon"}),items:es,label:"Adjust tone",value:"adjustTone"},aiFixSpellingAndGrammar:{type:"executable",icon:(0,l.jsx)(em.Y,{className:"tiptap-button-icon"}),label:"Fix spelling & grammar",value:"aiFixSpellingAndGrammar",onSelect:e=>{let{editor:t,options:n}=e;if(!t)return;let{insertAt:l,isSelection:i,context:a}=(0,en.pt)(t),s={...n,insertAt:l,regenerate:!i};i&&(s.text=a);let r=t.chain();"function"==typeof r.aiFixSpellingAndGrammar&&r.aiFixSpellingAndGrammar(s).run()}},aiExtend:{type:"executable",icon:(0,l.jsx)(ep.d,{className:"tiptap-button-icon"}),label:"Make longer",value:"aiExtend",onSelect:e=>{let{editor:t,options:n}=e;if(!t)return;let{insertAt:l,isSelection:i,context:a}=(0,en.pt)(t),s={...n,insertAt:l,regenerate:!i};i&&(s.text=a);let r=t.chain();"function"==typeof r.aiExtend&&r.aiExtend(s).run()}},aiShorten:{type:"executable",icon:(0,l.jsx)(eh.N,{className:"tiptap-button-icon"}),label:"Make shorter",value:"aiShorten",onSelect:e=>{let{editor:t,options:n}=e;if(!t)return;let{insertAt:l,isSelection:i,context:a}=(0,en.pt)(t),s={...n,insertAt:l,regenerate:!i};i&&(s.text=a);let r=t.chain();"function"==typeof r.aiShorten&&r.aiShorten(s).run()}},simplifyLanguage:{type:"executable",icon:(0,l.jsx)(ec.R,{className:"tiptap-button-icon"}),label:"Simplify language",value:"simplifyLanguage",onSelect:e=>{let{editor:t,options:n}=e;if(!t)return;let{insertAt:l,isSelection:i,context:a}=(0,en.pt)(t),s={...n,insertAt:l,regenerate:!i};i&&(s.text=a);let r=t.chain();"function"==typeof r.aiSimplify&&r.aiSimplify(s).run()}},improveWriting:{type:"executable",icon:(0,l.jsx)(ej.W,{className:"tiptap-button-icon"}),label:"Improve writing",value:"improveWriting",onSelect:e=>{let{editor:t,options:n}=e;if(!t)return;let{insertAt:l,isSelection:i,context:a}=(0,en.pt)(t),s={...n,insertAt:l,regenerate:!i};i&&(s.text=a);let r=t.chain();"function"==typeof r.aiRephrase&&r.aiRephrase(s).run()}},emojify:{type:"executable",icon:(0,l.jsx)(ej.W,{className:"tiptap-button-icon"}),label:"Emojify",value:"emojify",onSelect:e=>{let{editor:t,options:n}=e;if(!t)return;let{insertAt:l,isSelection:i,context:a}=(0,en.pt)(t),s={...n,insertAt:l,regenerate:!i};i&&(s.text=a);let r=t.chain();"function"==typeof r.aiEmojify&&r.aiEmojify(s).run()}},continueWriting:{type:"executable",icon:(0,l.jsx)(ex.S,{className:"tiptap-button-icon"}),label:"Continue writing",value:"continueWriting",onSelect:e=>{let{editor:t,options:n}=e;if(!t)return;let{insertAt:l,isSelection:i,context:a}=(0,en.pt)(t),s={...n,insertAt:l,regenerate:!i};i&&(s.text=a);let r=t.chain();"function"==typeof r.aiComplete&&r.aiComplete(s).run()}},summarize:{type:"executable",icon:(0,l.jsx)(eo.u,{className:"tiptap-button-icon"}),label:"Add a summary",value:"summarize",onSelect:e=>{let{editor:t,options:n}=e;if(!t)return;let{insertAt:l,isSelection:i,context:a}=(0,en.pt)(t),s={...n,insertAt:l,regenerate:!i};i&&(s.text=a);let r=t.chain();"function"==typeof r.aiSummarize&&r.aiSummarize(s).run()}},translateTo:{type:"nested",component:eb,filterItems:!0,icon:(0,l.jsx)(eu.j,{className:"tiptap-button-icon"}),items:ea,label:"Languages",value:"translateTo"}}}function ef(e){return"nested"===e.type}function eb(e){let{editor:t}=e,[n]=(0,el.jV)(),{state:a,updateState:s}=(0,en.oE)(),r=i.useMemo(()=>{let e={items:eg().translateTo.items||[]};return(0,el.q2)(e,n)},[n]),o=i.useCallback(e=>{if(!t)return;let{insertAt:n,isSelection:l,context:i}=(0,en.pt)(t);s({language:e});let r={stream:!0,format:"rich-text",insertAt:n,regenerate:!l};a.tone&&(r.tone=a.tone),l&&(r.text=i);let o=t.chain();"function"==typeof o.aiTranslate&&o.aiTranslate(e,r).run()},[t,a.tone,s]),c=(0,l.jsxs)(l.Fragment,{children:[r.length>0&&(0,l.jsx)(el.N0,{children:"Languages"}),r.map(e=>(0,l.jsx)(el.Dr,{onClick:()=>e.value&&o(e.value),render:(0,l.jsxs)(F.$n,{"data-style":"ghost",children:[(0,l.jsx)(eu.j,{className:"tiptap-button-icon"}),(0,l.jsx)("span",{className:"tiptap-button-text",children:e.label})]})},e.value))]});return n?c:(0,l.jsx)(el.W1,{placement:"right",trigger:(0,l.jsx)(el.IU,{render:(0,l.jsx)(el.Dr,{render:(0,l.jsxs)(F.$n,{"data-style":"ghost",children:[(0,l.jsx)(eu.j,{className:"tiptap-button-icon"}),(0,l.jsx)("span",{className:"tiptap-button-text",children:"Languages"}),(0,l.jsx)(el.D4,{render:(0,l.jsx)(er.v,{})})]})})}),children:(0,l.jsx)(el.rm,{children:(0,l.jsx)(ei.ex,{children:(0,l.jsx)(el.rX,{children:c})})})})}function ev(e){let{editor:t}=e,[n]=(0,el.jV)(),{state:a,updateState:s}=(0,en.oE)(),r=i.useMemo(()=>{let e={items:eg().adjustTone.items||[]};return(0,el.q2)(e,n)},[n]),o=i.useCallback(e=>{if(!t)return;let{insertAt:n,isSelection:l,context:i}=(0,en.pt)(t);a.tone&&a.tone===e||s({tone:e});let r={stream:!0,format:"rich-text",insertAt:n,regenerate:!l};a.language&&(r.language=a.language),l&&(r.text=i);let o=t.chain();"function"==typeof o.aiAdjustTone&&o.aiAdjustTone(e,r).run()},[t,a.language,a.tone,s]),c=r.map(e=>(0,l.jsx)(el.Dr,{onClick:()=>o(e.value||""),render:(0,l.jsx)(F.$n,{"data-style":"ghost",children:(0,l.jsx)("span",{className:"tiptap-button-text",children:e.label})})},e.value));return n?c:(0,l.jsx)(el.W1,{placement:"right",trigger:(0,l.jsx)(el.IU,{render:(0,l.jsx)(el.Dr,{render:(0,l.jsxs)(F.$n,{"data-style":"ghost",children:[(0,l.jsx)(ed.N,{className:"tiptap-button-icon"}),(0,l.jsx)("span",{className:"tiptap-button-text",children:"Adjust Tone"}),(0,l.jsx)(el.D4,{render:(0,l.jsx)(er.v,{})})]})})}),children:(0,l.jsx)(el.rm,{children:(0,l.jsx)(ei.ex,{children:(0,l.jsx)(el.rX,{children:c})})})})}function ey(e){let{menuItem:t,availableActions:n,editor:i}=e,{state:a}=(0,en.oE)();if(!t.value)return null;let s=n[t.value];if(!s)return null;if(ef(s)){let e=s.component;return(0,l.jsx)(e,{editor:i},t.value)}if("executable"===s.type){let e={stream:!0,format:"rich-text",language:a.language};return a.tone&&(e.tone=a.tone),(0,l.jsx)(el.Dr,{onClick:()=>s.onSelect({editor:i,options:e}),render:(0,l.jsxs)(F.$n,{"data-style":"ghost",children:[s.icon,(0,l.jsx)("span",{className:"tiptap-button-text",children:s.label})]})},t.value)}return null}function eC(e){let{editor:t}=e,{editor:n}=(0,I.l)(t),[a]=(0,el.jV)(),s=i.useMemo(()=>eg(),[]),r=i.useMemo(()=>(function(e){let t=e=>({label:e.label,value:e.value,icon:e.icon,filterItems:"nested"===e.type?e.filterItems:void 0});return[{label:"Edit",items:Object.values([e.adjustTone,e.aiFixSpellingAndGrammar,e.aiExtend,e.aiShorten,e.simplifyLanguage,e.improveWriting,e.emojify]).map(t)},{label:"Write",items:Object.values([e.continueWriting,e.summarize,e.translateTo]).map(t)}]})(s),[s]),o=i.useMemo(()=>(0,el._U)(r,a)||r,[r,a]),c=i.useCallback(e=>{if(!e.value)return!1;let t=s[e.value];return!!t&&(!(ef(t)&&t.filterItems&&a.trim())||(0,el.q2)({items:t.items||[]},a).length>0)},[s,a]);if(!n)return null;let u=o.map(e=>{var t,n;return{...e,items:null!=(n=null==(t=e.items)?void 0:t.filter(c))?n:[]}}).filter(e=>e.items.length>0);return 0===u.length?null:u.map((e,t)=>(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(el.rX,{children:[(0,l.jsx)(el.N0,{children:e.label}),e.items.map(e=>(0,l.jsx)(ey,{menuItem:e,availableActions:s,editor:n},e.value||t))]},t),t<u.length-1&&(0,l.jsx)($.w,{orientation:"horizontal"})]},t))}var ek=n(5069),ew=n(12038),eA=n(5392),eN=n(91047),eS=n(56280),eE=n(52759),eI=n(31699);function eL(e){let{onPlaceholderClick:t}=e;return(0,l.jsxs)("div",{className:"tiptap-ai-prompt-input-placeholder",onClick:t,children:[(0,l.jsxs)("div",{className:"tiptap-ai-prompt-input-placeholder-content",children:[(0,l.jsx)(Y.z,{className:"tiptap-ai-prompt-input-placeholder-icon"}),(0,l.jsx)("span",{className:"tiptap-ai-prompt-input-placeholder-text",children:"Tell AI what else needs to be changed..."})]}),(0,l.jsx)(F.$n,{"data-style":"primary",disabled:!0,children:(0,l.jsx)(ew.K,{className:"tiptap-button-icon"})})]})}function eR(e){let{tone:t,onToneChange:n}=e;return(0,l.jsxs)(eS.rI,{children:[(0,l.jsx)(eS.ty,{asChild:!0,children:(0,l.jsxs)(F.$n,{type:"button","data-style":"ghost","data-active-state":t?"on":"off",role:"button",tabIndex:-1,"aria-label":"Tone adjustment options",children:[(0,l.jsx)(ed.N,{className:"tiptap-button-icon"}),(0,l.jsx)("span",{className:"tiptap-button-text",children:"Tone"})]})}),(0,l.jsx)(eS.SQ,{align:"start",children:(0,l.jsx)(O.Zp,{children:(0,l.jsx)(O.bw,{children:(0,l.jsx)(F.e2,{children:en.Lk.map(e=>(0,l.jsx)(eS._2,{asChild:!0,children:(0,l.jsx)(F.$n,{"data-style":"ghost","data-active-state":t===e.value?"on":"off",onClick:()=>n(e.value),children:(0,l.jsx)("span",{className:"tiptap-button-text",children:e.label})})},e.value))})})})})]})}function eM(e){let{showPlaceholder:t,onInputSubmit:n,onToneChange:a,isEmpty:s=!1}=e,[r,o]=i.useState(null),[c]=(0,el.jV)(),u=i.useCallback(e=>{o(e),null==a||a(e)},[a]),d=i.useCallback(()=>{n(c)},[n,c]);return(0,l.jsxs)(eN.M7,{variant:"floating","data-plain":"true",className:"tiptap-ai-prompt-input-toolbar",style:{display:t?"none":"flex"},children:[(0,l.jsx)(eN.$Q,{children:(0,l.jsx)(eR,{tone:r,onToneChange:u})}),(0,l.jsx)(eA.h,{}),(0,l.jsx)(eN.$Q,{children:(0,l.jsx)(F.$n,{onClick:d,disabled:s,"data-style":"primary","aria-label":"Submit prompt",children:(0,l.jsx)(ew.K,{className:"tiptap-button-icon"})})})]})}function eF(e){var t;let{onInputSubmit:n,onToneChange:a,onClose:s,onInputFocus:r,onInputBlur:o,onEmptyBlur:c,onPlaceholderClick:u,showPlaceholder:d=!1,placeholder:p="Ask AI what you want...",...h}=e,[x,j]=(0,el.jV)(),[m,g]=i.useState(!1),f=i.useCallback(()=>{let e=null==x?void 0:x.trim();e&&(n(e),j(""))},[n,x,j]),b=i.useCallback(e=>{!(0,eI.v_)("backspace",e)||(null==x?void 0:x.length)?(0,eI.v_)("enter",e)&&!e.shiftKey?(e.preventDefault(),null==f||f()):(0,eI.v_)("escape",e)&&(e.preventDefault(),null==s||s()):(e.preventDefault(),null==s||s())},[x,s,f]),v=(t=""===x.trim(),i.useCallback(e=>{!e.currentTarget.contains(e.relatedTarget)&&(t&&c?c():o&&o())},[t,o,c])),y=i.useCallback(()=>{u&&u()},[u]),C=i.useCallback(()=>{g(!0),r&&r()},[r]),k=i.useCallback(e=>{g(!1),v(e)},[v]);return(0,l.jsx)("div",{className:"tiptap-ai-prompt-input","data-focused":m,"data-active-state":d?"off":"on",...h,children:d?(0,l.jsx)(eL,{onPlaceholderClick:y}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ei.G3,{autoSelect:"always",autoFocus:!0,render:(0,l.jsx)(eE.h,{onChange:e=>j(e.target.value),value:x,onKeyDown:b,onFocus:C,onBlur:k,className:"tiptap-ai-prompt-input-content",placeholder:p,autoFocus:!0,style:{display:d?"none":"flex"}})}),(0,l.jsx)(eM,{showPlaceholder:d,onInputSubmit:f,onToneChange:a,isEmpty:!(null==x?void 0:x.trim())})]})})}n(18993);var e$=n(2967),eO=n(4793),eT=n(64277);function eV(e){let{editor:t,options:n,onRegenerate:a,onAccept:s,onReject:r}=e,{aiGenerationIsLoading:o}=(0,b.W)(t),c=i.useCallback(()=>{if(!t)return;let e=t.chain().focus();"function"==typeof e.aiRegenerate&&e.aiRegenerate(n).run(),null==a||a()},[t,a,n]),u=i.useCallback(()=>{if(!t)return;let e=t.chain().focus();"function"==typeof e.aiReject&&e.aiReject().run(),null==r||r()},[t,r]),d=i.useCallback(()=>{if(!t)return;let e=t.chain().focus();"function"==typeof e.aiAccept&&e.aiAccept().run(),null==s||s()},[t,s]);return(0,l.jsxs)("div",{className:"tiptap-ai-menu-actions",children:[(0,l.jsx)("div",{className:"tiptap-ai-menu-results",children:(0,l.jsx)(F.e2,{orientation:"horizontal",children:(0,l.jsxs)(F.$n,{"data-style":"ghost",className:"tiptap-button",onClick:c,disabled:o,children:[(0,l.jsx)(e$.j,{className:"tiptap-button-icon"}),"Try again"]})})}),(0,l.jsx)("div",{className:"tiptap-ai-menu-commit",children:(0,l.jsxs)(F.e2,{orientation:"horizontal",children:[(0,l.jsxs)(F.$n,{"data-style":"ghost",className:"tiptap-button",onClick:u,children:[(0,l.jsx)(eO.u,{className:"tiptap-button-icon"}),"Discard"]}),(0,l.jsxs)(F.$n,{"data-style":"primary",className:"tiptap-button",onClick:d,children:[(0,l.jsx)(eT.S,{className:"tiptap-button-icon"}),"Apply"]})]})})]})}n(70905);var eW=n(55250);let eG=i.createContext(null),eH={isOpen:!1,tone:void 0,language:"en",shouldShowInput:!0,inputIsFocused:!1,fallbackAnchor:{element:null,rect:null}};function ez(){let e=i.useContext(eG);if(!e)throw Error("useAiMenuState must be used within an AiMenuStateProvider");return e}var eD=n(60533);function eQ(e){let{children:t}=e,{value:n,AiMenuStateContext:a}=function(){let[e,t]=i.useState(eH),n=i.useCallback(e=>{t(t=>({...t,...e}))},[]),l=i.useCallback((e,t)=>{let l=t||(null==e?void 0:e.getBoundingClientRect())||null;n({fallbackAnchor:{element:e,rect:l}})},[n]),a=i.useCallback(()=>{t(eH),document.querySelectorAll('[data-fallback-anchor="true"]').forEach(e=>e.remove())},[]);return{value:i.useMemo(()=>({state:e,updateState:n,setFallbackAnchor:l,reset:a}),[e,n,l,a]),AiMenuStateContext:eG}}();return(0,l.jsx)(a.Provider,{value:n,children:t})}function eU(e){let{editor:t}=e,{editor:n}=(0,I.l)(t),{state:a,updateState:s,setFallbackAnchor:r,reset:o}=ez(),{show:c,store:u}=(0,el.w6)(),{aiGenerationIsLoading:d,aiGenerationActive:p,aiGenerationHasMessage:h}=(0,b.W)(n),x=i.useRef(null),j=i.useCallback(()=>{n&&(o(),null==u||u.hideAll(),n.commands.resetUiState())},[n,o,u]),m=i.useCallback(e=>{if(!n||!e.trim())return;let{context:t}=function(e){var t,n;let l="",i={from:0,to:0},a=!0,s=e.storage,r=null==(t=s.ai)?void 0:t.generatedWith;if(r&&r.range&&(l=null==(n=s.ai)?void 0:n.response,i=r.range,a=!1),!r||!r.range){let{state:t}=e,{selection:n}=t,{from:a,to:s}=e.state.selection,r=n.content(),o=e.view.serializeForClipboard(r).dom.innerHTML,c=r.content.textBetween(0,r.content.size,"\n");l=o||c,i={from:a,to:s}}return{context:l,insertAt:i,isSelection:a}}(n),l=t?"".concat(t,"\n\n").concat(e):e;if(!a.fallbackAnchor.element||!a.fallbackAnchor.rect){let e=(0,ek.sI)(n);if(e){let t=e.getBoundingClientRect();r(e,t)}}let i=n.chain();"function"==typeof i.aiTextPrompt&&i.aiTextPrompt({text:l,insert:!0,stream:!0,tone:a.tone,format:"rich-text"}).run()},[n,a.tone,a.fallbackAnchor,r]),g=i.useCallback(e=>{u.setAnchorElement(e)},[u]),f=i.useCallback((e,t)=>{r(e,t)},[r]),v=i.useCallback(()=>{if(!n)return;let e=n.commands;"function"==typeof e.aiReject&&e.aiReject(),j()},[j,n]),y=i.useCallback(()=>{if(!n)return;let e=n.commands;"function"==typeof e.aiAccept&&e.aiAccept(),j()},[j,n]),C=i.useCallback(()=>{if(!n)return;let e=n.commands;d?"function"==typeof e.aiReject&&e.aiReject({type:"reset"}):"function"==typeof e.aiAccept&&e.aiAccept(),j()},[d,j,n]),k=i.useCallback(()=>{if(!d){if(j(),!n)return;let e=n.commands;"function"==typeof e.aiAccept&&e.aiAccept()}},[d,j,n]);!function(e){let{editor:t,aiGenerationActive:n,setAnchorElement:l,fallbackAnchor:a}=e,s=i.useRef(null);i.useEffect(()=>{if(!t||!n)return;let e=e=>{let{editor:t}=e,n=t.storage,i=n.ai||n.aiAdvanced;if((null==i?void 0:i.state)==="loading"){let e=function(e){let t=function(e){let t=e.view,n=t.dom.querySelectorAll(".tiptap-ai-insertion");if(0===n.length)return null;let l=n[n.length-1];if(l&&t.dom)try{var i=t.dom;if(!l||!i)throw Error("Both element and editorRoot must be provided");if(l===i)return l;if(!i.contains(l))throw Error("Element is not inside the editor root");let e=l;for(;e.parentElement&&e.parentElement!==i;)e=e.parentElement;return e}catch(e){}return l||null}(e);if(t)return t;let n=(0,ek.sI)(e);return n||null}(t);e&&e!==t.view.dom&&(s.current&&(s.current.remove(),s.current=null),l(e))}};return t.on("transaction",e),()=>{t.off("transaction",e),s.current&&(s.current.remove(),s.current=null)}},[t,n,l,a])}({editor:n,aiGenerationActive:p,setAnchorElement:g,fallbackAnchor:a.fallbackAnchor}),function(e){let{editor:t,aiGenerationActive:n,showMenuAtElement:l,setMenuVisible:a,onSelectionChange:s,prevent:r=!1}=e;i.useEffect(()=>{if(!t||!n||r)return;let e=e=>{var t;let{editor:i,transaction:r}=e;if(null==(t=r.selection)?void 0:t.empty)return;let o=(0,ek.sI)(i),c=!!(o&&n);if(a(c),c&&o){let e=o.getBoundingClientRect();null==s||s(o,e),l(o)}};return t.on("transaction",e),()=>{t.off("transaction",e)}},[t,n,l,a,s,r])}({editor:n,aiGenerationActive:p,showMenuAtElement:c,setMenuVisible:e=>s({isOpen:e}),onSelectionChange:f,prevent:d}),i.useEffect(()=>{d&&s({shouldShowInput:!1})},[d,s]),i.useEffect(()=>{!p&&a.isOpen&&j()},[p,a.isOpen,j]);let w=e=>(null==e||e.focus(),null==e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),setTimeout(()=>u.setAutoFocusOnShow(!1),0),!1),A=(0,ek.Mj)(n)||h&&a.shouldShowInput&&a.inputIsFocused;return n&&a.isOpen&&p?(0,l.jsx)(el.W1,{open:a.isOpen,placement:"bottom-start",store:u,children:(0,l.jsxs)(el.rm,{onClickOutside:k,className:"tiptap-ai-menu",flip:!1,children:[(0,l.jsxs)(eW.Zp,{children:[d&&(0,l.jsx)(eB,{editor:n}),!d&&(0,l.jsx)(eF,{ref:x,showPlaceholder:!d&&h&&!a.shouldShowInput,onInputFocus:()=>s({inputIsFocused:!0}),onInputBlur:()=>s({inputIsFocused:!1}),onClose:C,onPlaceholderClick:()=>s({shouldShowInput:!0}),onInputSubmit:e=>m(e),onToneChange:e=>s({tone:e})}),h&&!d&&(0,l.jsx)(eV,{editor:n,options:{tone:a.tone,format:"rich-text"},onAccept:y,onReject:v})]}),!d&&(0,l.jsx)(ei.Nf,{flip:!1,unmountOnHide:!0,autoFocus:!1,onFocus:()=>s({inputIsFocused:!0}),autoFocusOnShow:w,autoFocusOnHide:w,getAnchorRect:()=>{var e;return(null==(e=x.current)?void 0:e.getBoundingClientRect())||null},children:(0,l.jsx)(ei.ex,{style:{display:A?"block":"none"},children:(0,l.jsx)(eC,{})})})]})}):null}function eB(e){let{editor:t}=e,{reset:n}=ez(),a=i.useCallback(()=>{if(!t)return;let e=t.chain();"function"==typeof e.aiReject&&e.aiReject({type:"reset"}).run(),n(),t.commands.resetUiState()},[t,n]);return(0,l.jsxs)("div",{className:"tiptap-ai-menu-progress",children:[(0,l.jsxs)("div",{className:"tiptap-spinner-alt",children:[(0,l.jsx)("span",{children:"AI is writing"}),(0,l.jsxs)("div",{className:"dots-container",children:[(0,l.jsx)("div",{className:"dot"}),(0,l.jsx)("div",{className:"dot"}),(0,l.jsx)("div",{className:"dot"})]})]}),(0,l.jsx)(F.e2,{children:(0,l.jsx)(F.$n,{"data-style":"ghost",title:"Stop",onClick:a,children:(0,l.jsx)(eD.O,{className:"tiptap-button-icon"})})})]})}function e_(e){let{editor:t}=e;return(0,l.jsx)(eQ,{children:(0,l.jsx)(eU,{editor:t})})}n(87014);var eP=n(77886),eY=n(44291),eK=n(56006),eq=n(98816),eX=n(69290),eZ=n(16347),eJ=n(24106),e0=n(64825),e1=n(58006);n(4481),n(48080);var e2=n(87691),e4=n(68373),e8=n(88682),e9=n(25736),e7=n(48916),e5=n(98249),e3=n(41200),e6=n(62051),te=n(85142),tt=n(39915),tn=n(9740),tl=n(41819),ti=n(51277),ta=n(78116),ts=n(53344),tr=n(37030),to=n(37040),tc=n(47704),tu=n(88007),td=n(44350),tp=n(80999),th=n(69386),tx=n(29630),tj=n(64187),tm=n(51963),tg=n(62520),tf=n(376);let tb={MAIN:"main",HIGHLIGHTER:"highlighter",LINK:"link"};function tv(){return(0,l.jsxs)(eN.$Q,{children:[(0,l.jsx)(e6.Hc,{align:"left"}),(0,l.jsx)(e6.Hc,{align:"center"}),(0,l.jsx)(e6.Hc,{align:"right"}),(0,l.jsx)(e6.Hc,{align:"justify"})]})}function ty(){return(0,l.jsxs)(eN.$Q,{children:[(0,l.jsx)(e3.GY,{type:"superscript"}),(0,l.jsx)(e3.GY,{type:"subscript"})]})}function tC(){return(0,l.jsxs)(eN.$Q,{children:[(0,l.jsx)(e3.GY,{type:"bold"}),(0,l.jsx)(e3.GY,{type:"italic"}),(0,l.jsx)(e3.GY,{type:"strike"}),(0,l.jsx)(e3.GY,{type:"code"})]})}function tk(){let{recentColors:e,isInitialized:t,addRecentColor:n}=(0,ta.ZZ)();return(0,l.jsxs)(eS.lv,{children:[(0,l.jsx)(eS.nV,{asChild:!0,children:(0,l.jsxs)(F.$n,{"data-style":"ghost",children:[(0,l.jsx)(td.M,{className:"tiptap-button-icon"}),(0,l.jsx)("span",{className:"tiptap-button-text",children:"Color"}),(0,l.jsx)(eA.h,{}),(0,l.jsx)(er.v,{className:"tiptap-button-icon"})]})}),(0,l.jsx)(eS.dc,{children:(0,l.jsx)(eS.M5,{children:(0,l.jsx)(O.Zp,{children:(0,l.jsxs)(O.bw,{children:[t&&0!==e.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(O.Vt,{children:[(0,l.jsx)(O.kF,{children:"Recent colors"}),(0,l.jsx)(F.e2,{children:e.map(e=>(0,l.jsx)(eS._2,{asChild:!0,children:"text"===e.type?(0,l.jsx)(ts.xX,{textColor:e.value,label:e.label,text:e.label,tooltip:e.label,onApplied:e=>{let{color:t,label:l}=e;return n({type:"text",label:l,value:t})}}):(0,l.jsx)(tr.Yt,{highlightColor:e.value,text:e.label,tooltip:e.label,onApplied:e=>{let{color:t,label:l}=e;return n({type:"highlight",label:l,value:t})}})},"".concat(e.type,"-").concat(e.value)))})]}),(0,l.jsx)($.w,{orientation:"horizontal"})]}):null,(0,l.jsxs)(O.Vt,{children:[(0,l.jsx)(O.kF,{children:"Text color"}),(0,l.jsx)(F.e2,{children:ts.VF.map(e=>(0,l.jsx)(eS._2,{asChild:!0,children:(0,l.jsx)(ts.xX,{textColor:e.value,label:e.label,text:e.label,tooltip:e.label,onApplied:e=>{let{color:t,label:l}=e;return n({type:"text",label:l,value:t})}})},e.value))})]}),(0,l.jsx)($.w,{orientation:"horizontal"}),(0,l.jsxs)(O.Vt,{children:[(0,l.jsx)(O.kF,{children:"Highlight color"}),(0,l.jsx)(F.e2,{children:tr.um.map(e=>(0,l.jsx)(eS._2,{asChild:!0,children:(0,l.jsx)(tr.Yt,{highlightColor:e.value,text:e.label,tooltip:e.label,onApplied:e=>{let{color:t,label:l}=e;return n({type:"highlight",label:l,value:t})}})},e.value))})]})]})})})})]})}function tw(){return(0,l.jsxs)(eS.lv,{children:[(0,l.jsx)(eS.nV,{asChild:!0,children:(0,l.jsxs)(F.$n,{"data-style":"ghost",children:[(0,l.jsx)(tp.h,{className:"tiptap-button-icon"}),(0,l.jsx)("span",{className:"tiptap-button-text",children:"Turn into"}),(0,l.jsx)(eA.h,{}),(0,l.jsx)(er.v,{className:"tiptap-button-icon"})]})}),(0,l.jsx)(eS.M5,{children:(0,l.jsx)(ti.yF,{})})]})}function tA(e){let{editor:t}=e,{hasAnyActionGroups:n,hasColorActions:i,hasTransformActions:a,hasResetFormatting:s}=(0,et.T)(t),r=(0,e2.a)();return(0,l.jsx)(O.Zp,{children:(0,l.jsxs)(O.bw,{children:[(0,l.jsxs)(O.Vt,{children:[(0,l.jsx)(O.kF,{children:(0,w.KW)(t)}),(0,l.jsxs)(F.e2,{children:[i&&(0,l.jsx)(tk,{}),a&&(0,l.jsx)(tw,{}),s&&(0,l.jsx)(eS._2,{asChild:!0,children:(0,l.jsx)(tt.a6,{text:"Reset formatting"})})]})]}),n&&(0,l.jsx)($.w,{orientation:"horizontal"}),(0,l.jsxs)(F.e2,{children:[(0,l.jsx)(eS._2,{asChild:!0,children:(0,l.jsx)(tc.UM,{text:"Duplicate node",showShortcut:!r})}),(0,l.jsx)(eS._2,{asChild:!0,children:(0,l.jsx)(tu.TN,{text:"Copy to clipboard",showShortcut:!r})})]}),(0,l.jsx)($.w,{orientation:"horizontal"}),(0,l.jsx)(F.e2,{children:(0,l.jsx)(eS._2,{asChild:!0,children:(0,l.jsx)(to.mG,{text:"Ask AI",showShortcut:!r})})}),(0,l.jsx)($.w,{orientation:"horizontal"}),(0,l.jsx)(F.e2,{children:(0,l.jsx)(eS._2,{asChild:!0,children:(0,l.jsx)(tn.GJ,{text:"Delete",showShortcut:!r})})})]})})}function tN(e){let{editor:t}=e;return(0,l.jsxs)(eS.rI,{children:[(0,l.jsx)(eS.ty,{asChild:!0,children:(0,l.jsx)(F.$n,{"data-style":"ghost","data-appearance":"subdued",children:(0,l.jsx)(tm.F,{className:"tiptap-button-icon"})})}),(0,l.jsx)(eS.SQ,{portal:!0,children:(0,l.jsx)(tA,{editor:t})})]})}function tS(e){let{view:t,isMobile:n,onViewChange:a}=e,s=t.id;return n?t.mobileButton?i.cloneElement(t.mobileButton(()=>a(s)),{key:t.id}):(0,l.jsx)(F.$n,{onClick:()=>a(s),children:t.icon},t.id):t.desktopComponent?i.cloneElement(t.desktopComponent,{key:t.id}):null}function tE(e){let{toolbarViews:t,isMobile:n,onViewChange:i}=e;return(0,l.jsx)(l.Fragment,{children:Object.values(t).map(e=>(0,l.jsx)(tS,{view:e,isMobile:n,onViewChange:i},e.id))})}function tI(e){let{editor:t,isMobile:n,toolbarViews:i,onViewChange:a}=e,s=function(e){if(!e||!e.isEditable)return!1;let{selection:t}=e.state;return!t.empty}(t);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eN.$Q,{children:[(0,l.jsx)(te.lm,{}),(0,l.jsx)(tN,{editor:t})]}),(0,l.jsx)(eN.lR,{}),(0,l.jsxs)(eN.$Q,{children:[(0,l.jsx)(tf.uC,{direction:"down"}),(0,l.jsx)(tf.uC,{direction:"up"})]}),s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eN.lR,{}),(0,l.jsx)(eN.$Q,{children:(0,l.jsx)(tl.md,{portal:!0})}),(0,l.jsx)(eN.lR,{}),(0,l.jsx)(tC,{}),(0,l.jsx)(eN.lR,{}),(0,l.jsx)(tE,{toolbarViews:i,isMobile:n,onViewChange:a}),(0,l.jsx)(eN.lR,{}),(0,l.jsx)(ty,{}),(0,l.jsx)(eN.lR,{}),(0,l.jsx)(tv,{}),(0,l.jsx)(eN.lR,{}),(0,l.jsx)(eN.$Q,{children:(0,l.jsx)(e7.lR,{text:"Add"})})]})]})}function tL(e){let{view:t,onBack:n}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eN.$Q,{children:(0,l.jsxs)(F.$n,{"data-style":"ghost",onClick:n,children:[(0,l.jsx)(th.A,{className:"tiptap-button-icon"}),t.icon]})}),(0,l.jsx)(eN.lR,{fixed:!0}),t.content]})}function tR(e){var t,n;let{editor:a}=e,{editor:s}=(0,I.l)(a),r=(0,e2.a)(480),o=i.useRef(null),c=function(e){let[t,n]=i.useState(tb.MAIN);return i.useEffect(()=>{e||t===tb.MAIN||n(tb.MAIN)},[e,t]),{viewId:t,setViewId:n,isMainView:t===tb.MAIN,showMainView:()=>n(tb.MAIN),showView:e=>n(e)}}(r),u=(0,e4.l)(),d=(0,tg.b)(),p=(0,e8.k)({editor:s,overlayHeight:null!=(n=null==(t=o.current)?void 0:t.getBoundingClientRect().height)?n:0}),h=i.useMemo(()=>({[tb.HIGHLIGHTER]:{id:tb.HIGHLIGHTER,title:"Text Highlighter",icon:(0,l.jsx)(tx.F,{className:"tiptap-button-icon"}),content:(0,l.jsx)(e9.kY,{}),mobileButton:e=>(0,l.jsx)(e9.Hl,{onClick:e}),desktopComponent:(0,l.jsx)(e9.Fy,{})},[tb.LINK]:{id:tb.LINK,title:"Link Editor",icon:(0,l.jsx)(tj.q,{className:"tiptap-button-icon"}),content:(0,l.jsx)(e5.s8,{}),mobileButton:e=>(0,l.jsx)(e5.z9,{onClick:e}),desktopComponent:(0,l.jsx)(e5.Op,{})}}),[]),x=c.isMainView?null:h[c.viewId];return r&&s&&s.isEditable?(0,l.jsx)(eN.M7,{ref:o,style:{...d&&r?{opacity:0,transition:"opacity 0.1s ease-in-out"}:{},...r?{bottom:"calc(100% - ".concat(u.height-p.y,"px)")}:{}},children:c.isMainView?(0,l.jsx)(tI,{editor:s,isMobile:r,toolbarViews:h,onViewChange:c.showView}):x&&(0,l.jsx)(tL,{view:x,onBack:c.showMainView})}):null}var tM=n(4701),tF=n(10889),t$=n(12467),tO=n(91069);function tT(){let{editor:e}=(0,I.l)(),t=(0,e2.a)(480),{lockDragHandle:n,aiGenerationActive:a,commentInputVisible:s}=(0,b.W)(e),[r,o]=i.useState(!1);return(i.useEffect(()=>{if(!e)return;let t=()=>{let{state:t}=e,{selection:n}=t,l=(0,w.$9)(e,n)&&(!(0,tM.BQ)(n)||(0,tM.BQ)(n)&&"image"===n.node.type.name);if(s||a)return void o(!1);o(l)};return t(),e.on("selectionUpdate",t),()=>{e.off("selectionUpdate",t)}},[e,a,s]),n||t)?null:(0,l.jsx)(tO.L,{shouldShow:r,children:(0,l.jsxs)(eN.M7,{variant:"floating",children:[(0,l.jsx)(eN.$Q,{}),(0,l.jsx)(eN.lR,{fixed:!0}),(0,l.jsx)(eN.$Q,{children:(0,l.jsx)(ti.TX,{hideWhenUnavailable:!0})}),(0,l.jsx)(eN.lR,{}),(0,l.jsxs)(eN.$Q,{children:[(0,l.jsx)(e3.GY,{type:"bold",hideWhenUnavailable:!0}),(0,l.jsx)(e3.GY,{type:"italic",hideWhenUnavailable:!0}),(0,l.jsx)(e3.GY,{type:"strike",hideWhenUnavailable:!0}),(0,l.jsx)(e3.GY,{type:"code",hideWhenUnavailable:!0})]}),(0,l.jsx)(eN.lR,{}),(0,l.jsxs)(eN.$Q,{children:[(0,l.jsx)(e5.Op,{autoOpenOnLinkActive:!1,hideWhenUnavailable:!0}),(0,l.jsx)(ta.iS,{hideWhenUnavailable:!0}),(0,l.jsx)(tF.v,{editor:e})]}),(0,l.jsx)(tV,{hideWhenUnavailable:!0})]})})}function tV(e){let{editor:t,hideWhenUnavailable:n=!1,...a}=e,{editor:s}=(0,I.l)(t),[r,o]=i.useState(!1);return(i.useEffect(()=>{if(!s)return;let e=()=>{o(function(e){let{editor:t,hideWhenUnavailable:n}=e;if(!t)return!1;if(n&&!t.isActive("code")){if(!t)return!1;let e=["left","center","right","justify"].some(e=>(0,e6.Xd)(t,e));return["superscript","subscript"].some(e=>(0,e3.sT)(t,e))||e}return!!(null==t?void 0:t.isEditable)}({editor:s,hideWhenUnavailable:n}))};return e(),s.on("selectionUpdate",e),()=>{s.off("selectionUpdate",e)}},[s,n]),r&&s&&s.isEditable)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eN.lR,{}),(0,l.jsx)(eN.$Q,{children:(0,l.jsxs)(t$.AM,{children:[(0,l.jsx)(t$.Wv,{asChild:!0,children:(0,l.jsx)(F.$n,{type:"button","data-style":"ghost",role:"button",tabIndex:-1,tooltip:"More options",...a,children:(0,l.jsx)(tm.F,{className:"tiptap-button-icon"})})}),(0,l.jsx)(t$.hl,{side:"top",align:"end",alignOffset:4,sideOffset:4,asChild:!0,children:(0,l.jsxs)(eN.M7,{variant:"floating",tabIndex:0,children:[(0,l.jsxs)(eN.$Q,{children:[(0,l.jsx)(e3.GY,{type:"superscript"}),(0,l.jsx)(e3.GY,{type:"subscript"})]}),(0,l.jsx)(eN.lR,{}),(0,l.jsxs)(eN.$Q,{children:[(0,l.jsx)(e6.Hc,{align:"left"}),(0,l.jsx)(e6.Hc,{align:"center"}),(0,l.jsx)(e6.Hc,{align:"right"}),(0,l.jsx)(e6.Hc,{align:"justify"})]}),(0,l.jsx)(eN.lR,{})]})})]})})]}):null}var tW=n(8793),tG=n(46833);n(99067);var tH=n(73007),tz=n(54923),tD=n(73709),tQ=n(28033),tU=n(5625),tB=n(78084),t_=n(44691),tP=n(82348),tY=n(26278),tK=n(2091),tq=n(78273),tX=n(29514),tZ=n(90528),tJ=n(63859),t0=n(91870),t1=n(65166),t2=n(11882),t4=n(46203),t8=n(18496),t9=n(3312),t7=n(77097),t5=n(82647),t3=n(71776),t6=n(72550);function ne(e){let{text:t="Connecting..."}=e;return(0,l.jsx)("div",{className:"spinner-container",children:(0,l.jsxs)("div",{className:"spinner-content",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,l.jsx)("path",{d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,l.jsx)("div",{className:"spinner-loading-text",children:t})]})})}function nt(){let{editor:e}=i.useContext(a.pl),{aiGenerationIsLoading:t,aiGenerationIsSelection:n,aiGenerationHasMessage:s}=(0,b.W)(e),{modalProps:r}=(0,eP.R)(),[o,c]=i.useState({isOpen:!1,content:"",position:null});i.useEffect(()=>{let e=e=>{let{content:t,position:n}=e.detail;c({isOpen:!0,content:t,position:n})};return window.addEventListener("show-paste-modal",e),()=>window.removeEventListener("show-paste-modal",e)},[]);let u=i.useCallback(()=>{c({isOpen:!1,content:"",position:null})},[]);return(i.useEffect(()=>{e&&!t&&n&&s&&(e.commands.resetUiState(),e.commands.setCodeBlock(),e.commands.toggleCodeBlock())},[s,t,n,e]),e)?(0,l.jsxs)(l.Fragment,{children:[r&&(0,l.jsx)(eP.I,{...r}),(0,l.jsxs)(a.$Z,{editor:e,role:"presentation",className:"notion-like-editor-content",style:{cursor:e.view.dragging?"grabbing":"auto"},spellCheck:!1,children:[(0,l.jsx)(tR,{}),(0,l.jsx)(et.t,{}),(0,l.jsx)(e_,{}),(0,l.jsx)(k.r,{}),(0,l.jsx)(T,{}),(0,l.jsx)(tT,{}),(0,l.jsx)(e0.U,{editor:e}),(0,l.jsx)(t6.D,{editor:e})]}),(0,l.jsx)(eY.r,{editor:e,isOpen:o.isOpen,onClose:u,pastedContent:o.content,position:o.position})]}):null}function nn(e){let{placeholder:t="Start writing..."}=e,n=[s.W.configure({horizontalRule:!1,dropcursor:{width:2},link:{openOnClick:!1}}),v.d,j.n.configure({types:["heading","paragraph"]}),u.Or.configure({placeholder:t,emptyNodeClass:"is-empty with-slash"}),f.zT.configure({emojis:f.bH.filter(e=>!e.name.includes("regional")),forceFallbackImages:!0}),m.Rs.configure({inlineOptions:{onClick:(e,t)=>{if(!i)return;let n=prompt("수식을 수정하세요:",e.attrs.latex);null!==n&&i.chain().setNodeSelection(t).updateInlineMath({latex:n}).focus().run()}},blockOptions:{onClick:(e,t)=>{if(!i)return;let n=prompt("수식을 수정하세요:",e.attrs.latex);null!==n&&i.chain().setNodeSelection(t).updateBlockMath({latex:n}).focus().run()}},katexOptions:{throwOnError:!1}}),h.Z,x.E,c.Q1,c.xJ,o._0,o.L2.configure({nested:!0}),p.f4.configure({multicolor:!0}),u.LN,r._V,C.t.configure({accept:"image/*",maxSize:ee.w3,limit:3,upload:ee.f5,onError:e=>console.error("Upload failed:",e)}),g.p,d.o5,y.y,eJ.A,tW.A.configure({lowlight:tG.l,defaultLanguage:"javascript"}),t3.Q,e1.R0.configure({table:{resizable:!0}}),tH.A],i=(0,a.hG)({immediatelyRender:!1,shouldRerenderOnTransaction:!1,editorProps:{attributes:{class:"notion-like-editor"}},extensions:n});return i?(0,l.jsx)("div",{className:"notion-like-editor-wrapper",children:(0,l.jsx)(a.pl.Provider,{value:{editor:i},children:(0,l.jsx)(nt,{})})}):(0,l.jsx)(ne,{})}function nl(e){let{room:t,placeholder:n="Start writing..."}=e;return(0,l.jsx)(eq.vu,{children:(0,l.jsx)(eK.Dv,{children:(0,l.jsx)(eX.VK,{room:t,children:(0,l.jsx)(eZ.KH,{children:(0,l.jsx)(ni,{placeholder:n})})})})})}function ni(e){let{placeholder:t}=e,{provider:n,hasCollab:i}=(0,eX.Hb)(),{aiToken:a,hasAi:s}=(0,eZ.On)();return i&&!n||s&&!a?(0,l.jsx)(ne,{}):(0,l.jsx)(nn,{placeholder:t,aiToken:a})}tG.l.registerLanguage("css",tD.A),tG.l.registerLanguage("js",tQ.A),tG.l.registerLanguage("javascript",tQ.A),tG.l.registerLanguage("jsx",tQ.A),tG.l.registerLanguage("ts",tU.A),tG.l.registerLanguage("tsx",tU.A),tG.l.registerLanguage("typescript",tU.A),tG.l.registerLanguage("json",tP.A),tG.l.registerLanguage("html",tz.A),tG.l.registerLanguage("xml",tz.A),tG.l.registerLanguage("python",tB.A),tG.l.registerLanguage("cpp",t_.A),tG.l.registerLanguage("c",tK.A),tG.l.registerLanguage("java",tY.A),tG.l.registerLanguage("csharp",tq.A),tG.l.registerLanguage("sql",tX.A),tG.l.registerLanguage("bash",tZ.A),tG.l.registerLanguage("markdown",tJ.A),tG.l.registerLanguage("php",t0.A),tG.l.registerLanguage("ruby",t1.A),tG.l.registerLanguage("scss",t2.A),tG.l.registerLanguage("less",t4.A),tG.l.registerLanguage("go",t8.A),tG.l.registerLanguage("rust",t9.A),tG.l.registerLanguage("swift",t7.A),tG.l.registerLanguage("kotlin",t5.A)},41270:()=>{},49494:(e,t,n)=>{Promise.resolve().then(n.bind(n,15929))},87014:()=>{}},e=>{e.O(0,[507,525,769,418,76,330,109,375,4,277,545,703,408,441,964,358],()=>e(e.s=49494)),_N_E=e.O()}]);