(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{21585:()=>{},29147:(e,t,r)=>{Promise.resolve().then(r.bind(r,84254))},84254:(e,t,r)=>{"use strict";r.d(t,{NotionEditor:()=>eA});var s=r(95155),n=r(12115),a=r(75109),o=r(83490),l=r(81891),i=r(17148),c=r(66377),d=r(54548),u=r(50099),g=r(4652),p=r(27192),h=r(24927),m=r(84109),f=r(87058),x=r(70504),w=r(16938),v=r(54643),b=r(3454),j=r(49020),A=r(55892);r(89054),r(68922),r(15736),r(49998),r(6604),r(9162),r(32078);var E=r(34078),k=r(85750),y=r(78241),L=r(79314),O=r(60548),S=r(79153),C=r(64108);r(98704);let D=e=>{let{config:t,...r}=e,{getSlashMenuItems:a}=(0,L.J)(t),[o,l]=n.useState(!1);return n.useEffect(()=>{let e=()=>l(document.body.classList.contains("code-dark"));e();let t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]),(0,s.jsx)(y.WP,{char:"/",pluginKey:"slashDropdownMenu",decorationClass:"tiptap-slash-decoration",decorationContent:"Filter...",selector:"tiptap-slash-dropdown-menu",items:e=>{let{query:t,editor:r}=e;return(0,y.nL)(a(r),t)},...r,children:e=>(0,s.jsx)(_,{...e,config:t,isDark:o})})},N=e=>{let{item:t,isSelected:r,onSelect:a,isDark:o}=e,l=n.useRef(null),[i,c]=n.useState(!1);n.useEffect(()=>{let e=document.querySelector('[data-selector="tiptap-slash-dropdown-menu"]');if(!l.current||!r||!e)return;let t=(0,k.aI)(l.current,e);"top"===t?l.current.scrollIntoView(!0):"bottom"===t&&l.current.scrollIntoView(!1)},[r]);let d=t.badge,u=o?i?"#000000":"#ffffff":void 0;return(0,s.jsxs)(O.$n,{ref:l,"data-style":"ghost","data-active-state":r?"on":"off",onClick:a,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{color:u},children:[d&&(0,s.jsx)(d,{className:"tiptap-button-icon",style:{color:u,fill:u}}),(0,s.jsx)("div",{className:"tiptap-button-text",style:{color:u},children:t.title})]})},_=e=>{let{items:t,selectedIndex:r,onSelect:a,config:o,isDark:l}=e,i=n.useMemo(()=>{let e=[];if((null==o?void 0:o.showGroups)===!1)return t.forEach((t,n)=>{e.push((0,s.jsx)(N,{item:t,isSelected:n===r,onSelect:()=>a(t),isDark:l},"item-".concat(n,"-").concat(t.title)))}),e;let n={};return t.forEach((e,t)=>{let r=e.group||"";n[r]||(n[r]={items:[],indices:[]}),n[r].items.push(e),n[r].indices.push(t)}),Object.entries(n).forEach((t,n)=>{let[o,i]=t;n>0&&e.push((0,s.jsx)(S.w,{orientation:"horizontal"},"separator-".concat(n)));let c=i.items.map((e,t)=>{let n=i.indices[t];return(0,s.jsx)(N,{item:e,isSelected:n===r,onSelect:()=>a(e),isDark:l},"item-".concat(n,"-").concat(e.title))});o?e.push((0,s.jsxs)(C.Vt,{children:[(0,s.jsx)(C.kF,{style:{color:l?"#8b949e":void 0},children:o}),(0,s.jsx)(O.e2,{children:c})]},"group-".concat(n,"-").concat(o))):e.push(...c)}),e},[t,r,a,null==o?void 0:o.showGroups,l]);return i.length?(0,s.jsx)(C.Zp,{className:"tiptap-slash-card",style:{maxHeight:"var(--suggestion-menu-max-height)",backgroundColor:l?"#1e1e1e":void 0,borderColor:l?"#30363d":void 0,color:l?"#c9d1d9":void 0},children:(0,s.jsx)(C.bw,{className:"tiptap-slash-card-body",style:{color:l?"#c9d1d9":void 0},children:i})}):null};var T=r(98234),R=r(31407),I=r(77886),M=r(44291),J=r(56006),P=r(98816),F=r(69290),V=r(16347),z=r(78156),B=r(24106),W=r(64825),G=r(58006);r(21585),r(48080);var K=r(40793),U=r(50725),H=r(8793),Z=r(46833);r(99067);var Q=r(73007),$=r(54923),q=r(73709),Y=r(28033),X=r(5625),ee=r(78084),et=r(44691),er=r(82348),es=r(26278),en=r(2091),ea=r(78273),eo=r(29514),el=r(90528),ei=r(63859),ec=r(91870),ed=r(65166),eu=r(11882),eg=r(46203),ep=r(18496),eh=r(3312),em=r(77097),ef=r(82647),ex=r(71776),ew=r(72550);function ev(e){let{text:t="Connecting..."}=e;return(0,s.jsx)("div",{className:"spinner-container",children:(0,s.jsxs)("div",{className:"spinner-content",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("path",{d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("div",{className:"spinner-loading-text",children:t})]})})}function eb(){let{editor:e}=n.useContext(a.pl),{aiGenerationIsLoading:t,aiGenerationIsSelection:r,aiGenerationHasMessage:o}=(0,v.W)(e),{modalProps:l}=(0,I.R)(),[i,c]=n.useState({isOpen:!1,content:"",position:null});n.useEffect(()=>{let e=e=>{let{content:t,position:r}=e.detail;c({isOpen:!0,content:t,position:r})};return window.addEventListener("show-paste-modal",e),()=>{window.removeEventListener("show-paste-modal",e)}},[]);let d=n.useCallback(()=>{c({isOpen:!1,content:"",position:null})},[]);n.useEffect(()=>{e&&!t&&r&&o&&(e.commands.resetUiState(),e.commands.setCodeBlock(),e.commands.toggleCodeBlock())},[o,t,r,e]);let u=n.useCallback(()=>{if(e)try{return e.getJSON()}catch(e){console.error("에디터 내용 추출 중 오류 발생:",e)}},[e]),g=n.useCallback(t=>{if(!e)return void console.error("에디터가 초기화되지 않았습니다.");try{e.commands.setContent(t)}catch(e){console.error("에디터 내용 설정 중 오류 발생:",e)}},[e]),p=n.useCallback(t=>{if(!e)return void console.error("에디터가 초기화되지 않았습니다.");try{e.commands.setContent(t),e.setEditable(!1)}catch(e){console.error("에디터 내용 설정 중 오류 발생:",e)}},[e]),h=n.useCallback((e,t)=>{window.parent&&window.parent!==window&&(console.log("DEBUG - sendToParent",t),window.parent.postMessage({type:"EDITOR_JSON_DATA",data:t,source:"notion-like-editor",payload:t},"*"))},[]);return(n.useEffect(()=>{let e=e=>{if(console.log(e),e.data&&e.data.type)switch(e.data.type){case"EDITOR_JSON_DATA":let t=u();t&&h("documentData",t);break;case"SET_EDITOR_JSON_DATA":let r=e.data.data;console.log("DEBUG - SET_EDITOR_JSON_DATA",r),g(r);break;case"SET_EDITOR_JSON_DATA_READ":let s=e.data.data;console.log("DEBUG - SET_EDITOR_JSON_DATA_FROM_PARENT",s),p(s);break;case"change-color":{let t="dark"===e.data.color;document.body.classList.toggle("code-dark",t),console.log(t)}}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[u,g,p,h]),n.useEffect(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),window.parent.postMessage({type:"SAVE_PRESSED"},"*")),window.parent.postMessage({type:"IFRAME_KEYDOWN"},"*")};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),e)?(0,s.jsxs)(s.Fragment,{children:[l&&(0,s.jsx)(I.I,{...l}),(0,s.jsxs)(a.$Z,{editor:e,role:"presentation",className:"notion-like-editor-content",style:{cursor:e.view.dragging?"grabbing":"auto"},spellCheck:!1,children:[(0,s.jsx)(K.s,{}),(0,s.jsx)(T.t,{}),(0,s.jsx)(R.ym,{}),(0,s.jsx)(E.r,{}),(0,s.jsx)(D,{}),(0,s.jsx)(U.N,{}),(0,s.jsx)(W.U,{editor:e}),(0,s.jsx)(ew.D,{editor:e})]}),(0,s.jsx)(M.r,{editor:e,isOpen:i.isOpen,onClose:d,pastedContent:i.content,position:i.position})]}):null}function ej(e){let{placeholder:t="Start writing..."}=e,r=[o.W.configure({horizontalRule:!1,dropcursor:{width:2},link:{openOnClick:!1}}),b.d,m.n.configure({types:["heading","paragraph"]}),d.Or.configure({placeholder:t,emptyNodeClass:"is-empty with-slash"}),w.zT.configure({emojis:w.bH.filter(e=>!e.name.includes("regional")),forceFallbackImages:!0}),f.Rs.configure({inlineOptions:{onClick:(e,t)=>{if(!n)return;let r=prompt("수식을 수정하세요:",e.attrs.latex);null!==r&&n.chain().setNodeSelection(t).updateInlineMath({latex:r}).focus().run()}},blockOptions:{onClick:(e,t)=>{if(!n)return;let r=prompt("수식을 수정하세요:",e.attrs.latex);null!==r&&n.chain().setNodeSelection(t).updateBlockMath({latex:r}).focus().run()}},katexOptions:{throwOnError:!1,macros:{"\\R":"\\mathbb{R}","\\N":"\\mathbb{N}","\\Z":"\\mathbb{Z}","\\Q":"\\mathbb{Q}","\\C":"\\mathbb{C}"}}}),p.Z,h.E,c.Q1,c.xJ,i._0,i.L2.configure({nested:!0}),g.f4.configure({multicolor:!0}),d.LN,l._V,A.t.configure({accept:"image/*",maxSize:z.w3,limit:3,upload:z.f5,onError:e=>console.error("Upload failed:",e)}),x.p,u.o5,j.y,B.A,H.A.configure({lowlight:Z.l,defaultLanguage:"javascript"}),ex.Q,G.R0.configure({table:{resizable:!0}}),Q.A],n=(0,a.hG)({immediatelyRender:!1,shouldRerenderOnTransaction:!1,editorProps:{attributes:{class:"notion-like-editor"},handlePaste(e,t){var r,s;let n=t.clipboardData;if(!n)return!1;let a=[];if(n.files&&n.files.length>0)for(let e=0;e<n.files.length;e++){let t=n.files[e];t&&(null==(r=t.type)?void 0:r.startsWith("image/"))&&a.push(t)}else if(n.items&&n.items.length>0)for(let e=0;e<n.items.length;e++){let t=n.items[e];if("file"===t.kind){let e=t.getAsFile();e&&(null==(s=e.type)?void 0:s.startsWith("image/"))&&a.push(e)}}return 0!==a.length&&(t.preventDefault(),a.forEach(async t=>{try{var r;let s=await (0,z.f5)(t),{state:n}=e,a=n.schema.nodes.image.create({src:s,alt:(null==(r=t.name)?void 0:r.replace(/\.[^/.]+$/,""))||"image",title:t.name||"image"}),o=n.tr.replaceSelectionWith(a).scrollIntoView();e.dispatch(o)}catch(e){console.error("Paste image upload failed:",e)}}),!0)}},extensions:r});return n?(0,s.jsx)("div",{className:"notion-like-editor-wrapper",children:(0,s.jsx)(a.pl.Provider,{value:{editor:n},children:(0,s.jsx)(eb,{})})}):(0,s.jsx)(ev,{})}function eA(e){let{room:t,placeholder:r="Start writing..."}=e;return(0,s.jsx)(P.vu,{children:(0,s.jsx)(J.Dv,{children:(0,s.jsx)(F.VK,{room:t,children:(0,s.jsx)(V.KH,{children:(0,s.jsx)(eE,{placeholder:r})})})})})}function eE(e){let{placeholder:t}=e,{provider:r,hasCollab:n}=(0,F.Hb)(),{aiToken:a,hasAi:o}=(0,V.On)();return n&&!r||o&&!a?(0,s.jsx)(ev,{}):(0,s.jsx)(ej,{placeholder:t,aiToken:a})}Z.l.registerLanguage("css",q.A),Z.l.registerLanguage("js",Y.A),Z.l.registerLanguage("javascript",Y.A),Z.l.registerLanguage("jsx",Y.A),Z.l.registerLanguage("ts",X.A),Z.l.registerLanguage("tsx",X.A),Z.l.registerLanguage("typescript",X.A),Z.l.registerLanguage("json",er.A),Z.l.registerLanguage("html",$.A),Z.l.registerLanguage("xml",$.A),Z.l.registerLanguage("python",ee.A),Z.l.registerLanguage("cpp",et.A),Z.l.registerLanguage("c",en.A),Z.l.registerLanguage("java",es.A),Z.l.registerLanguage("csharp",ea.A),Z.l.registerLanguage("sql",eo.A),Z.l.registerLanguage("bash",el.A),Z.l.registerLanguage("markdown",ei.A),Z.l.registerLanguage("php",ec.A),Z.l.registerLanguage("ruby",ed.A),Z.l.registerLanguage("scss",eu.A),Z.l.registerLanguage("less",eg.A),Z.l.registerLanguage("go",ep.A),Z.l.registerLanguage("rust",eh.A),Z.l.registerLanguage("swift",em.A),Z.l.registerLanguage("kotlin",ef.A)}}]);