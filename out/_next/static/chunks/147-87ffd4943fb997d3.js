(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{21585:()=>{},29147:(e,t,r)=>{Promise.resolve().then(r.bind(r,37259))},37259:(e,t,r)=>{"use strict";r.d(t,{NotionEditor:()=>eh});var n=r(95155),a=r(12115),s=r(75109),l=r(83490),i=r(81891),o=r(17148),c=r(66377),g=r(54548),d=r(50099),u=r(4652),p=r(27192),h=r(24927),m=r(84109),f=r(87058),A=r(70504),w=r(16938),x=r(54643),v=r(3454),E=r(49020),k=r(55892);r(89054),r(68922),r(15736),r(49998),r(6604),r(9162),r(32078);var j=r(34078),L=r(42215),b=r(98234),y=r(48054),O=r(77886),_=r(44291),D=r(56006),N=r(98816),C=r(69290),S=r(16347),T=r(78156),R=r(24106),I=r(64825),J=r(58006);r(21585),r(48080);var M=r(40793),P=r(50725),B=r(8793),z=r(46833);r(99067);var U=r(73007),W=r(54923),F=r(73709),K=r(28033),V=r(5625),G=r(78084),H=r(44691),Q=r(82348),Z=r(26278),$=r(2091),q=r(78273),Y=r(29514),X=r(90528),ee=r(63859),et=r(91870),er=r(65166),en=r(11882),ea=r(46203),es=r(18496),el=r(3312),ei=r(77097),eo=r(82647),ec=r(71776),eg=r(72550);function ed(e){let{text:t="Connecting..."}=e;return(0,n.jsx)("div",{className:"spinner-container",children:(0,n.jsxs)("div",{className:"spinner-content",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("path",{d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,n.jsx)("div",{className:"spinner-loading-text",children:t})]})})}function eu(){let{editor:e}=a.useContext(s.pl),{aiGenerationIsLoading:t,aiGenerationIsSelection:r,aiGenerationHasMessage:l}=(0,x.W)(e),{modalProps:i}=(0,O.R)(),[o,c]=a.useState({isOpen:!1,content:"",position:null});a.useEffect(()=>{let e=e=>{let{content:t,position:r}=e.detail;c({isOpen:!0,content:t,position:r})};return window.addEventListener("show-paste-modal",e),()=>{window.removeEventListener("show-paste-modal",e)}},[]);let g=a.useCallback(()=>{c({isOpen:!1,content:"",position:null})},[]);a.useEffect(()=>{e&&!t&&r&&l&&(e.commands.resetUiState(),e.commands.setCodeBlock(),e.commands.toggleCodeBlock())},[l,t,r,e]);let d=a.useCallback(()=>{if(e)try{return e.getJSON()}catch(e){console.error("에디터 내용 추출 중 오류 발생:",e)}},[e]),u=a.useCallback(t=>{if(!e)return void console.error("에디터가 초기화되지 않았습니다.");try{e.commands.setContent(t)}catch(e){console.error("에디터 내용 설정 중 오류 발생:",e)}},[e]),p=a.useCallback(t=>{if(!e)return void console.error("에디터가 초기화되지 않았습니다.");try{e.commands.setContent(t),e.setEditable(!1)}catch(e){console.error("에디터 내용 설정 중 오류 발생:",e)}},[e]),h=a.useCallback((e,t)=>{window.parent&&window.parent!==window&&(console.log("DEBUG - sendToParent",t),window.parent.postMessage({type:"EDITOR_JSON_DATA",data:t,source:"notion-like-editor",payload:t},"*"))},[]);return(a.useEffect(()=>{let e=e=>{if(console.log(e),e.data&&e.data.type)switch(e.data.type){case"EDITOR_JSON_DATA":let t=d();t&&h("documentData",t);break;case"SET_EDITOR_JSON_DATA":let r=e.data.data;console.log("DEBUG - SET_EDITOR_JSON_DATA",r),u(r);break;case"SET_EDITOR_JSON_DATA_READ":let n=e.data.data;console.log("DEBUG - SET_EDITOR_JSON_DATA_FROM_PARENT",n),p(n);break;case"change-color":{let t="dark"===e.data.color;document.body.classList.toggle("code-dark",t),console.log(t)}}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[d,u,p,h]),a.useEffect(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),window.parent.postMessage({type:"SAVE_PRESSED"},"*")),window.parent.postMessage({type:"IFRAME_KEYDOWN"},"*")};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),e)?(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)(O.I,{...i}),(0,n.jsxs)(s.$Z,{editor:e,role:"presentation",className:"notion-like-editor-content",style:{cursor:e.view.dragging?"grabbing":"auto"},spellCheck:!1,children:[(0,n.jsx)(M.s,{}),(0,n.jsx)(b.t,{}),(0,n.jsx)(y.ym,{}),(0,n.jsx)(j.r,{}),(0,n.jsx)(L.k,{}),(0,n.jsx)(P.N,{}),(0,n.jsx)(I.U,{editor:e}),(0,n.jsx)(eg.D,{editor:e})]}),(0,n.jsx)(_.r,{editor:e,isOpen:o.isOpen,onClose:g,pastedContent:o.content,position:o.position})]}):null}function ep(e){let{placeholder:t="Start writing..."}=e,r=[l.W.configure({horizontalRule:!1,dropcursor:{width:2},link:{openOnClick:!1}}),v.d,m.n.configure({types:["heading","paragraph"]}),g.Or.configure({placeholder:t,emptyNodeClass:"is-empty with-slash"}),w.zT.configure({emojis:w.bH.filter(e=>!e.name.includes("regional")),forceFallbackImages:!0}),f.Rs.configure({inlineOptions:{onClick:(e,t)=>{if(!a)return;let r=prompt("수식을 수정하세요:",e.attrs.latex);null!==r&&a.chain().setNodeSelection(t).updateInlineMath({latex:r}).focus().run()}},blockOptions:{onClick:(e,t)=>{if(!a)return;let r=prompt("수식을 수정하세요:",e.attrs.latex);null!==r&&a.chain().setNodeSelection(t).updateBlockMath({latex:r}).focus().run()}},katexOptions:{throwOnError:!1,macros:{"\\R":"\\mathbb{R}","\\N":"\\mathbb{N}","\\Z":"\\mathbb{Z}","\\Q":"\\mathbb{Q}","\\C":"\\mathbb{C}"}}}),p.Z,h.E,c.Q1,c.xJ,o._0,o.L2.configure({nested:!0}),u.f4.configure({multicolor:!0}),g.LN,i._V,k.t.configure({accept:"image/*",maxSize:T.w3,limit:3,upload:T.f5,onError:e=>console.error("Upload failed:",e)}),A.p,d.o5,E.y,R.A,B.A.configure({lowlight:z.l,defaultLanguage:"javascript"}),ec.Q,J.R0.configure({table:{resizable:!0}}),U.A],a=(0,s.hG)({immediatelyRender:!1,shouldRerenderOnTransaction:!1,editorProps:{attributes:{class:"notion-like-editor"},handlePaste(e,t){var r,n;let a=t.clipboardData;if(!a)return!1;let s=[];if(a.files&&a.files.length>0)for(let e=0;e<a.files.length;e++){let t=a.files[e];t&&(null==(r=t.type)?void 0:r.startsWith("image/"))&&s.push(t)}else if(a.items&&a.items.length>0)for(let e=0;e<a.items.length;e++){let t=a.items[e];if("file"===t.kind){let e=t.getAsFile();e&&(null==(n=e.type)?void 0:n.startsWith("image/"))&&s.push(e)}}return 0!==s.length&&(t.preventDefault(),s.forEach(async t=>{try{var r;let n=await (0,T.f5)(t),{state:a}=e,s=a.schema.nodes.image.create({src:n,alt:(null==(r=t.name)?void 0:r.replace(/\.[^/.]+$/,""))||"image",title:t.name||"image"}),l=a.tr.replaceSelectionWith(s).scrollIntoView();e.dispatch(l)}catch(e){console.error("Paste image upload failed:",e)}}),!0)}},extensions:r});return a?(0,n.jsx)("div",{className:"notion-like-editor-wrapper",children:(0,n.jsx)(s.pl.Provider,{value:{editor:a},children:(0,n.jsx)(eu,{})})}):(0,n.jsx)(ed,{})}function eh(e){let{room:t,placeholder:r="Start writing..."}=e;return(0,n.jsx)(N.vu,{children:(0,n.jsx)(D.Dv,{children:(0,n.jsx)(C.VK,{room:t,children:(0,n.jsx)(S.KH,{children:(0,n.jsx)(em,{placeholder:r})})})})})}function em(e){let{placeholder:t}=e,{provider:r,hasCollab:a}=(0,C.Hb)(),{aiToken:s,hasAi:l}=(0,S.On)();return a&&!r||l&&!s?(0,n.jsx)(ed,{}):(0,n.jsx)(ep,{placeholder:t,aiToken:s})}z.l.registerLanguage("css",F.A),z.l.registerLanguage("js",K.A),z.l.registerLanguage("javascript",K.A),z.l.registerLanguage("jsx",K.A),z.l.registerLanguage("ts",V.A),z.l.registerLanguage("tsx",V.A),z.l.registerLanguage("typescript",V.A),z.l.registerLanguage("json",Q.A),z.l.registerLanguage("html",W.A),z.l.registerLanguage("xml",W.A),z.l.registerLanguage("python",G.A),z.l.registerLanguage("cpp",H.A),z.l.registerLanguage("c",$.A),z.l.registerLanguage("java",Z.A),z.l.registerLanguage("csharp",q.A),z.l.registerLanguage("sql",Y.A),z.l.registerLanguage("bash",X.A),z.l.registerLanguage("markdown",ee.A),z.l.registerLanguage("php",et.A),z.l.registerLanguage("ruby",er.A),z.l.registerLanguage("scss",en.A),z.l.registerLanguage("less",ea.A),z.l.registerLanguage("go",es.A),z.l.registerLanguage("rust",el.A),z.l.registerLanguage("swift",ei.A),z.l.registerLanguage("kotlin",eo.A)}}]);